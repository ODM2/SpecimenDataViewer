<div class="col-sm-12" style="margin-bottom: 20px;">
  <div class="row">

  </div>
</div>

<div class="col-sm-12">
  <md-card>
    <md-card-content>
      <div class="row">
        <!--SEARCH CONTROLS-->
        <div class="col-12 col-sm-5">
          <div><label>Search</label></div>
          <md-icon>search</md-icon>
          <md-input-container style="width: calc(100% - 71px);">
            <input #filter mdInput placeholder="Search" [(ngModel)]="searchString">
          </md-input-container>

          <button md-icon-button (click)="clearSearch()"
                  mdTooltip="Clear"
                  [mdTooltipShowDelay]="500">
            <md-icon>highlight_off</md-icon>
          </button>
        </div>

        <!--DATE FILTERING CONTROLS-->
        <div class="col-12 col-sm-7">
          <div class="row">
            <div class="col-sm-12 col-sm-9">
              <div class="row">
                <div class="col-12">
                  <label>Date Range</label>
                </div>
                <div class="col-6">
                  <md-input-container>
                    <input mdInput
                           [mdDatepicker]="beginDate"
                           [(ngModel)]="__beginDate"
                           (dateChange)="onDateRangeChange()"
                           placeholder="Start Date">
                    <md-datepicker-toggle mdSuffix [for]="beginDate"></md-datepicker-toggle>
                  </md-input-container>
                  <md-datepicker #beginDate></md-datepicker>
                  <button md-icon-button class="custom-input-addon"
                          (click)="__beginDate = null;;onDateRangeChange()"
                          mdTooltip="Clear"
                          [mdTooltipShowDelay]="500">
                    <md-icon>highlight_off</md-icon>
                  </button>
                </div>

                <div class="col-6">
                  <md-input-container>
                    <input mdInput
                           [mdDatepicker]="endDate"
                           (dateChange)="onDateRangeChange()"
                           [(ngModel)]="__endDate"
                           placeholder="End Date">
                    <md-datepicker-toggle mdSuffix [for]="endDate"></md-datepicker-toggle>
                  </md-input-container>
                  <md-datepicker #endDate></md-datepicker>
                  <button md-icon-button
                          (click)="__endDate = null;onDateRangeChange()"
                          class="custom-input-addon"
                          mdTooltip="Clear"
                          [mdTooltipShowDelay]="500">
                    <md-icon>highlight_off</md-icon>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!--ACTIONS CONTROLS-->
        <div class="col-sm-9">
          <md-menu #appMenu="mdMenu" [overlapTrigger]="false">
            <button md-menu-item (click)="onDisplayChange('All')">
              <md-icon style="margin-right: 0;">{{ optionDisplay == 'All' ? 'check' : ''}}</md-icon>
              All
            </button>
            <button md-menu-item (click)="onDisplayChange('Selected')">
              <md-icon style="margin-right: 0;">{{ optionDisplay == 'Selected' ? 'check' : ''}}</md-icon>
              Selected
            </button>
            <button md-menu-item (click)="onDisplayChange('Plotted')">
              <md-icon style="margin-right: 0;">{{ optionDisplay == 'Plotted' ? 'check' : ''}}</md-icon>
              Plotted
            </button>
          </md-menu>

          <label style="margin-right: 8px;">Display:</label>
          <button id="btnSelectView" md-button md-raised-button [mdMenuTriggerFor]="appMenu">
            <span>{{ optionDisplay }}</span> <span class="caret"></span>
          </button>
          <button md-raised-button color="accent"
                  (click)="plotSelected()"
                  [disabled]="selectedCount == 0">
            <md-icon>assessment</md-icon>
            Plot
          </button>

          <button md-raised-button color="primary"
                  [disabled]="selectedCount == 0">
            <md-icon>file_download</md-icon>
            Export
          </button>
        </div>

        <div class="col-sm-3 text-right">
          <md-chip-list style="display: inline-block;vertical-align: middle;">
            <md-chip color="accent" selected="true">
              <md-icon>assessment</md-icon>
              <strong>Plotting:&nbsp;</strong>
              ({{this.plotCount}}/5)
            </md-chip>
          </md-chip-list>
          <button md-raised-button
                  (click)="clearPlots()"
                  [disabled]="plotCount == 0">
            <i class="material-icons">clear</i>
            Clear Plot
          </button>
        </div>
      </div>

      <div id="specimen-table-container" class="md-shadow-1">
        <md-table #table [dataSource]="dataSource">
          <!-- Selection Column -->
          <ng-container cdkColumnDef="selection">
            <md-header-cell *cdkHeaderCellDef>
              <md-checkbox
                (click)="toggleSelectedAll()"
                [(ngModel)]="allSelected"
                [indeterminate]="selectedCount >= 1">
              </md-checkbox>
            </md-header-cell>

            <md-cell *cdkCellDef="let row">
              <md-checkbox [(ngModel)]="row.selected" (change)="updateSelectedCount()"></md-checkbox>
              <!--{{ row.selected }}-->
            </md-cell>
          </ng-container>

          <!-- Actions Column -->
          <ng-container cdkColumnDef="actions">
            <md-header-cell *cdkHeaderCellDef> Actions</md-header-cell>
            <md-cell *cdkCellDef="let row">
              <ng-container mdTooltip="Plot">
                <button md-icon-button
                        [color]="row.plotted ? 'accent' : 'primary'"
                        (click)="row.plotted = !row.plotted; updatePlotCount()">
                  <md-icon>assessment</md-icon>
                </button>
                <!--{{row.plotted}}-->
              </ng-container>

              <button md-icon-button
                      mdTooltip="Export"
                      color="primary">
                <md-icon>file_download</md-icon>
              </button>

              <button md-icon-button
                      (click)="openDetailsDialog('Some data')"
                      mdTooltip="View Details"
                      color="primary">
                <md-icon>more</md-icon>
              </button>
            </md-cell>
          </ng-container>

          <!-- StartDate Column -->
          <ng-container cdkColumnDef="endDate">
            <md-header-cell *cdkHeaderCellDef> End Date</md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.endDate.toLocaleString()|date:'dd/MM/yyyy'}}</md-cell>
          </ng-container>

          <!-- StartDate Column -->
          <ng-container cdkColumnDef="startDate">
            <md-header-cell *cdkHeaderCellDef> Start Date</md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.startDate.toLocaleString()|date:'dd/MM/yyyy'}}</md-cell>
          </ng-container>

          <!-- VariableName Column -->
          <ng-container cdkColumnDef="variableName">
            <md-header-cell *cdkHeaderCellDef> Variable Name</md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.variableName}}</md-cell>
          </ng-container>

          <!-- Site Name Column -->
          <ng-container cdkColumnDef="siteName">
            <md-header-cell *cdkHeaderCellDef> Site Name</md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.siteName}}</md-cell>
          </ng-container>

          <!-- Site Code Column -->
          <ng-container cdkColumnDef="siteCode">
            <md-header-cell *cdkHeaderCellDef> Site Code</md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.siteCode}}</md-cell>
          </ng-container>

          <!-- Network Column -->
          <ng-container cdkColumnDef="network">
            <md-header-cell *cdkHeaderCellDef> Network</md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.network}}</md-cell>
          </ng-container>

          <!-- Variable Code Column -->
          <ng-container cdkColumnDef="variableCode">
            <md-header-cell *cdkHeaderCellDef> Variable Code</md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.variableCode}}</md-cell>
          </ng-container>

          <!-- Medium Column -->
          <ng-container cdkColumnDef="medium">
            <md-header-cell *cdkHeaderCellDef> Medium</md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.medium}}</md-cell>
          </ng-container>

          <md-header-row *cdkHeaderRowDef="displayedColumns"></md-header-row>
          <md-row *cdkRowDef="let row; columns: displayedColumns;"></md-row>
        </md-table>
      </div>
      <md-paginator #paginator
                    [length]="exampleDatabase.data.length"
                    [pageIndex]="0"
                    [pageSize]="5"
                    [pageSizeOptions]="[5, 10, 25, 50, 100]">
      </md-paginator>
    </md-card-content>
  </md-card>
</div>
